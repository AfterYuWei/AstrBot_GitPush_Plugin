name: astrbot_plugin_git_push
display_name: Git仓库推送插件
desc: 监听GitHub、GitLab、CNB仓库更新并推送到群聊/私聊，支持仓库和群组级别监听
version: v1.0.0
author: YourName
repo: https://github.com/yourname/astrbot_plugin_git_push

# 插件配置项 - 可在 AstrBot WebUI 中配置
_config:
  # 全局设置
  auto_check:
    description: 是否开启自动检查更新
    type: bool
    default: false
  check_interval:
    description: 自动检查间隔（秒）
    type: int
    default: 1800
  first_push:
    description: 首次添加仓库时是否推送
    type: bool
    default: false
  
  # GitHub 配置
  github_enabled:
    description: 是否启用 GitHub 监听
    type: bool
    default: true
  github_token:
    description: GitHub 访问令牌（可选，用于提高API限制）
    type: string
    default: ""
    secret: true
  
  # GitLab 配置
  gitlab_enabled:
    description: 是否启用 GitLab 监听
    type: bool
    default: true
  gitlab_url:
    description: GitLab API 地址（自部署请修改，如 https://gitlab.example.com/api/v4）
    type: string
    default: "https://gitlab.com/api/v4"
  gitlab_token:
    description: GitLab 访问令牌（可选）
    type: string
    default: ""
    secret: true
  
  # CNB 配置
  cnb_enabled:
    description: 是否启用 CNB 监听
    type: bool
    default: true
  cnb_token:
    description: CNB 访问令牌（可选）
    type: string
    default: ""
    secret: true
  
  # 推送目标配置
  push_groups:
    description: 推送的群聊ID列表（JSON数组格式，如 ["123456", "789012"]）
    type: string
    default: "[]"
  push_users:
    description: 推送的用户ID列表（JSON数组格式，如 ["111111", "222222"]）
    type: string
    default: "[]"
  
  # 仓库监听配置
  watch_repos:
    description: |
      监听的仓库列表（JSON数组格式）
      字段说明:
      - provider: 提供商 (github/gitlab/cnb)
      - repo: 仓库名 (owner/repo)
      - branch: 分支名 (可选，为空使用默认分支)
      - watch_type: 监听类型 (commits/releases)
      - note: 备注 (可选)
    type: string
    default: "[]"
  
  # 群组监听配置
  watch_groups:
    description: |
      监听的群组/组织列表（JSON数组格式）
      字段说明:
      - provider: 提供商 (github/gitlab/cnb)
      - group: 组织名/群组名
      - watch_type: 监听类型 (commits/releases)
      - include_repos: 只监听这些仓库 (可选，为空监听全部)
      - exclude_repos: 排除这些仓库 (可选)
      - branch: 默认分支 (可选，为空使用各仓库默认分支)
      - note: 备注 (可选)
    type: string
    default: "[]"
